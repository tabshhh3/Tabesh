# ูุตุจ ู ูพฺฉุฑุจูุฏ ูุงุจูุช ุญุฐู ู ูพุงฺฉุณุงุฒ ุงูุฒููู Tabesh

## ุฎูุงุตู ุชุบุฑุงุช

ุงู ุจูโุฑูุฒุฑุณุงู ุดุงูู ุฏู ุจุฎุด ุงุตู ุงุณุช:

### ุจุฎุด ฑ: ุฑูุน ุจุงฺฏโูุง ุจุฑููุจุฑ/ุฏุฑููุฑุฒ (Export/Import) ๐

**ูุดฺฉูุงุช ุฑูุน ุดุฏู:**
1. โ ูุงู ูุชุบุฑ JavaScript ุงุดุชุจุงู: `tabeshAdmin` โ `tabeshAdminData` (ธ ููุฑุฏ)
2. โ URL ุชฺฉุฑุงุฑ: ุญุฐู `tabesh/v1/` ุงุฒ ูุณุฑูุง ฺูู ูุจูุงู ุฏุฑ `restUrl` ููุฌูุฏ ุจูุฏ

**ูุชุฌู:** ุฏฺฉููโูุง ุจุฑููุจุฑ ู ุฏุฑููุฑุฒ ุงฺฉููู ุจู ุฏุฑุณุช ฺฉุงุฑ ูโฺฉููุฏ โ

---

### ุจุฎุด ฒ: ุงูุฒูุฏู ูุงุจูุช ุญุฐู ู ูพุงฺฉุณุงุฒ ๐๏ธ

ูุงุจูุชโูุง ุฌุฏุฏ ุจุฑุง ุญุฐู ุฏุงุฏูโูุง ุชุณุช ู ูุฏุฑุช ุงูุฒููู:

## ูฺฺฏโูุง ุงุถุงูู ุดุฏู

### 1๏ธโฃ ุญุฐู ุณูุงุฑุดุงุช
- ุญุฐู ููู ุณูุงุฑุดุงุช
- ุญุฐู ููุท ุณูุงุฑุดุงุช ุจุงฺฏุงู ุดุฏู
- ุญุฐู ุณูุงุฑุดุงุช ูุฏูโุชุฑ ุงุฒ X ุฑูุฒ
- ุญุฐู ุณูุงุฑุดุงุช ฺฉ ฺฉุงุฑุจุฑ ุฎุงุต (ุจุง User ID)

### 2๏ธโฃ ุญุฐู ูุงูโูุง
- ุญุฐู ุฑฺฉูุฑุฏูุง ูุงู ุงุฒ ุฏุชุงุจุณ
- ุญุฐู ูุงูโูุง ูุฒฺฉ ุงุฒ ุณุฑูุฑ
- ุญุฐู ูุงูโูุง ุชู (orphan files)
  - ุฑฺฉูุฑุฏูุง ุจุฏูู ูุงู ูุฒฺฉ
  - ูุงูโูุง ูุฒฺฉ ุจุฏูู ุฑฺฉูุฑุฏ ุฏุชุงุจุณ

### 3๏ธโฃ ุญุฐู ูุงฺฏโูุง
- ุญุฐู ููู ูุงฺฏโูุง (ุนุงุฏ + ุงููุช)
- ุญุฐู ููุท ูุงฺฏโูุง ุนุงุฏ
- ุญุฐู ููุท ูุงฺฏโูุง ุงููุช
- ุญุฐู ูุงฺฏโูุง ูุฏูโุชุฑ ุงุฒ X ุฑูุฒ

### 4๏ธโฃ ุจุงุฒฺฏุฑุฏุงู ุชูุธูุงุช
- ุฑุณุช ุชูุธูุงุช ุจู ุญุงูุช ูพุดโูุฑุถ
- ุณูุงุฑุดุงุช ู ูุงูโูุง ุญูุธ ูโุดููุฏ

### 5๏ธโฃ ุฑุณุช ฺฉุงูู (Factory Reset)
- ุญุฐู **ููู ฺุฒ**: ุณูุงุฑุดุงุชุ ูุงูโูุงุ ูุงฺฏโูุงุ ุชูุธูุงุช
- ูุงุฒ ุจู ุชุฃุฏ ฺูุฏฺฏุงูู (ุชุงูพ ฺฉููู `RESET`)
- โ๏ธ **ุฎุทุฑ ุจุงูุง:** ูุงุจู ุจุงุฒฺฏุดุช ูุณุช!

---

## ุฏุณุชุฑุณ ุจู ูุงุจูุชโูุง

### ูุณุฑ ุฏุฑ ูุฏุฑุช ูุฑุฏูพุฑุณ:
```
ูพุดุฎูุงู โ Tabesh โ ุชูุธูุงุช โ ุจุฑููุจุฑ ู ุฏุฑููุฑุฒ โ ๐๏ธ ุญุฐู ู ูพุงฺฉุณุงุฒ
```

---

## ุฑุงูููุง ุงุณุชูุงุฏู

### ฺฏุงู ฑ: ููุงุด ุขูุงุฑ
1. ูุงุฑุฏ ุตูุญู ุชูุธูุงุช ุดูุฏ
2. ุฑู ุชุจ **"ุจุฑููุจุฑ ู ุฏุฑููุฑุฒ"** ฺฉูฺฉ ฺฉูุฏ
3. ุจู ุจุฎุด **"๐๏ธ ุญุฐู ู ูพุงฺฉุณุงุฒ"** ุจุฑูุฏ
4. ุฏฺฉูู **"๐ ููุงุด ุขูุงุฑ"** ุฑุง ฺฉูฺฉ ฺฉูุฏ

ุขูุงุฑ ูุนู ููุงุด ุฏุงุฏู ูโุดูุฏ:
- ุชุนุฏุงุฏ ุณูุงุฑุดุงุช (ฺฉู ู ุจุงฺฏุงู)
- ุชุนุฏุงุฏ ูุงูโูุง (ุฑฺฉูุฑุฏูุงุ ูุณุฎูโูุงุ ูุฒฺฉ)
- ุชุนุฏุงุฏ ูุงฺฏโูุง (ุนุงุฏ ู ุงููุช)
- ูุธุงู ุขูพููุฏ

### ฺฏุงู ฒ: ุญุฐู ุณูุงุฑุดุงุช
**ฺฏุฒููโูุง:**
- โ๏ธ ุญุฐู ููู ุณูุงุฑุดุงุช
- โ๏ธ ุญุฐู ููุท ุณูุงุฑุดุงุช ุจุงฺฏุงู ุดุฏู
- ๐ ุญุฐู ุณูุงุฑุดุงุช ูุฏูโุชุฑ ุงุฒ ___ ุฑูุฒ
- ๐ค ุญุฐู ุณูุงุฑุดุงุช ฺฉุงุฑุจุฑ ุจุง ุดูุงุณู: ___

**ูุฑุงุญู:**
1. ฺฏุฒูู(ูุง) ููุฑุฏ ูุธุฑ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ
2. ุฏฺฉูู **"๐๏ธ ุญุฐู ุณูุงุฑุดุงุช"** ุฑุง ฺฉูฺฉ ฺฉูุฏ
3. ูพุงู ุชุฃุฏ ุฑุง ุจุฎูุงูุฏ ู ุชุฃุฏ ฺฉูุฏ
4. ููุชุธุฑ ุชฺฉูู ุนููุงุช ุจูุงูุฏ

### ฺฏุงู ณ: ุญุฐู ูุงูโูุง
**ฺฏุฒููโูุง:**
- โ๏ธ ุญุฐู ุฑฺฉูุฑุฏูุง ูุงู ุงุฒ ุฏุชุงุจุณ
- โ๏ธ ุญุฐู ูุงูโูุง ูุฒฺฉ ุงุฒ ุณุฑูุฑ

**ุฏฺฉููโูุง:**
- **๐๏ธ ุญุฐู ูุงูโูุง:** ุญุฐู ุจุฑุงุณุงุณ ฺฏุฒููโูุง ุงูุชุฎุงุจ
- **๐งน ุญุฐู ูุงูโูุง ุชู:** ุงุณฺฉู ู ุญุฐู ุฎูุฏฺฉุงุฑ ูุงูโูุง ุชู

### ฺฏุงู ด: ุญุฐู ูุงฺฏโูุง
**ฺฏุฒููโูุง:**
- ๐ ููู ูุงฺฏโูุง (ุนุงุฏ ู ุงููุช)
- ๐ ููุท ูุงฺฏโูุง ุนุงุฏ
- ๐ ููุท ูุงฺฏโูุง ุงููุช
- ๐ ุญุฐู ูุงฺฏโูุง ูุฏูโุชุฑ ุงุฒ ___ ุฑูุฒ (ุงุฎุชุงุฑ)

### ฺฏุงู ต: ุจุงุฒฺฏุฑุฏุงู ุชูุธูุงุช
**ฺฉุงุฑุจุฑุฏ:** ุฒูุงู ฺฉู ูโุฎูุงูุฏ ุชูุธูุงุช ุฑุง ุฑุณุช ฺฉูุฏ ูู ุฏุงุฏูโูุง ุญูุธ ุดููุฏ

**ูุฑุงุญู:**
1. ุฏฺฉูู **"๐ ุจุงุฒฺฏุฑุฏุงู ุชูุธูุงุช"** ุฑุง ฺฉูฺฉ ฺฉูุฏ
2. ูพุงู ุชุฃุฏ ุฑุง ุจุฎูุงูุฏ
3. ุชุฃุฏ ฺฉูุฏ

### ฺฏุงู ถ: ุฑุณุช ฺฉุงูู (Factory Reset)
**โ๏ธ ุฎุทุฑ ุจุงูุง - ููุท ุฏุฑ ุดุฑุงุท ุฎุงุต ุงุณุชูุงุฏู ฺฉูุฏ!**

**ูุฑุงุญู:**
1. ฺฉููู **`RESET`** ุฑุง ุฏุฑ ฺฉุงุฏุฑ ุชุฃุฏ ุชุงูพ ฺฉูุฏ (ุญุชูุงู ุจุง ุญุฑูู ุจุฒุฑฺฏ)
2. ุฏฺฉูู **"๐ ุฑุณุช ฺฉุงูู"** ุฑุง ฺฉูฺฉ ฺฉูุฏ
3. ูพุงู ูุดุฏุงุฑ ุงูู ุฑุง ุจุฎูุงูุฏ ู ุชุฃุฏ ฺฉูุฏ
4. ูพุงู ูุดุฏุงุฑ ุฏูู ุฑุง ุจุฎูุงูุฏ ู ุชุฃุฏ ฺฉูุฏ
5. ููุชุธุฑ ุชฺฉูู ุญุฐู ููู ฺุฒ ุจูุงูุฏ
6. ุตูุญู ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุจุงุฑฺฏุฐุงุฑ ูุฌุฏุฏ ูโุดูุฏ

---

## ุงููุช ู ูุงฺฏโฺฏุฐุงุฑ

### ูุญุงูุธุชโูุง ุงููุช
โ **ุชุฃุฏ ุฏุณุชุฑุณ:** ููุท ุงุฏููโูุง ุจุง ูุงุจูุช `manage_woocommerce`
โ **Nonce Verification:** ุฌููฺฏุฑ ุงุฒ ุญููุงุช CSRF
โ **Path Traversal Protection:** ุงุนุชุจุงุฑุณูุฌ ูุณุฑ ูุงูโูุง
โ **Exception Handling:** ูุฏุฑุช ุฎุทุง ุฏุฑ ุนููุงุช ูุงู
โ **IP Detection:** ุดูุงุณุง ุตุญุญ IP ูพุดุช Proxy/CDN

### ูุงฺฏโฺฏุฐุงุฑ
ุชูุงู ุนููุงุช ุญุฐู ุฏุฑ ุฌุฏูู `wp_tabesh_security_logs` ุซุจุช ูโุดููุฏ:
- ุดูุงุณู ฺฉุงุฑุจุฑ ุงูุฌุงูโุฏููุฏู
- ููุน ุนููุงุช (cleanup_*)
- ฺฏุฒููโูุง ุงุณุชูุงุฏู ุดุฏู
- ูุชุฌู ุนููุงุช
- ุขุฏุฑุณ IP
- ุชุงุฑุฎ ู ุฒูุงู

---

## REST API Endpoints

### ุจุฑุง ุชูุณุนูโุฏููุฏฺฏุงู
ุชูุงู endpointโูุง ุจุง prefix `/wp-json/tabesh/v1/cleanup/` ูุงุจู ุฏุณุชุฑุณ ูุณุชูุฏ:

```
GET  /cleanup/preview           - ููุงุด ุขูุงุฑ
POST /cleanup/orders            - ุญุฐู ุณูุงุฑุดุงุช
POST /cleanup/files             - ุญุฐู ูุงูโูุง
POST /cleanup/logs              - ุญุฐู ูุงฺฏโูุง
POST /cleanup/reset-settings    - ุฑุณุช ุชูุธูุงุช
POST /cleanup/factory-reset     - ุฑุณุช ฺฉุงูู
```

**ูุงุฒููุฏโูุง:**
- X-WP-Nonce header
- capability: `manage_woocommerce`

---

## ุฌุฏุงูู ุฏุชุงุจุณ ุชุญุช ุชุฃุซุฑ

ุนููุงุชโูุง ุญุฐู ุจุฑ ุงู ุฌุฏุงูู ุชุฃุซุฑ ูโฺฏุฐุงุฑูุฏ:

```
wp_tabesh_orders             - ุณูุงุฑุดุงุช
wp_tabesh_files              - ูุงูโูุง
wp_tabesh_file_versions      - ูุณุฎูโูุง ูุงู
wp_tabesh_file_comments      - ูุธุฑุงุช ูุงู
wp_tabesh_logs               - ูุงฺฏโูุง ุนุงุฏ
wp_tabesh_security_logs      - ูุงฺฏโูุง ุงููุช
wp_tabesh_upload_tasks       - ูุธุงู ุขูพููุฏ
wp_tabesh_download_tokens    - ุชูฺฉูโูุง ุฏุงูููุฏ
wp_tabesh_document_metadata  - ูุชุงุฏุชุง ุงุณูุงุฏ
wp_tabesh_settings           - ุชูุธูุงุช
```

**ูพูุดู ูุฒฺฉ:**
```
wp-content/uploads/tabesh-files/    (ุง plugin-files/)
```

---

## ูฺฉุงุช ููู

### โ๏ธ ูุจู ุงุฒ ุงุณุชูุงุฏู
1. **ุญุชูุงู ูพุดุชุจุงู ุจฺฏุฑุฏ!** ุนููุงุช ูุงุจู ุจุงุฒฺฏุดุช ูุณุช
2. ุงุจุชุฏุง ุงุฒ ูุญุท ุชุณุช ุงุณุชูุงุฏู ฺฉูุฏ
3. ุขูุงุฑ ุฑุง ุจุจูุฏ ุชุง ุจุฏุงูุฏ ฺู ฺุฒ ุญุฐู ูโุดูุฏ

### โ ุงุณุชูุงุฏูโูุง ุชูุตู ุดุฏู
- ูพุงฺฉุณุงุฒ ุฏุงุฏูโูุง ุชุณุช ุฏุฑ ูุญุท Development
- ุญุฐู ุณูุงุฑุดุงุช ุจุณุงุฑ ูุฏู (>365 ุฑูุฒ)
- ุญุฐู ูุงฺฏโูุง ูุฏู ุจุฑุง ฺฉุงูุด ุญุฌู ุฏุชุงุจุณ
- ุญุฐู ูุงูโูุง ุชู ุจุฑุง ุจูููโุณุงุฒ ูุถุง

### โ ุงุณุชูุงุฏูโูุง ุฎุทุฑูุงฺฉ
- ุฑุณุช ฺฉุงูู ุฏุฑ ูุญุท Production ุจุฏูู ูพุดุชุจุงู
- ุญุฐู ููู ุณูุงุฑุดุงุช ุฏุฑ ุณุงุช ูุนุงู
- ุญุฐู ูุงูโูุง ุจุฏูู ุงุทููุงู ุงุฒ ูพุดุชุจุงู

---

## ุนุจโุงุจ

### ูุดฺฉู: ุฏฺฉููโูุง ฺฉุงุฑ ููโฺฉููุฏ
**ุฑุงูโุญู:**
1. Cache ูุฑูุฑฺฏุฑ ุฑุง ูพุงฺฉ ฺฉูุฏ
2. Console ูุฑูุฑฺฏุฑ ุฑุง ุจุฑุฑุณ ฺฉูุฏ (F12)
3. ุจุฑุฑุณ ฺฉูุฏ ูุณุฎู JavaScript ุจูโุฑูุฒ ุดุฏู ุจุงุดุฏ

### ูุดฺฉู: ุฎุทุง Permission Denied
**ุฑุงูโุญู:**
1. ูุทูุฆู ุดูุฏ ุจุง ุญุณุงุจ ุงุฏูู ูุงุฑุฏ ุดุฏูโุงุฏ
2. ุจุฑุฑุณ ฺฉูุฏ capability `manage_woocommerce` ุฑุง ุฏุงุฑุฏ

### ูุดฺฉู: ุฎุทุง ุฏุฑ ุญุฐู ูุงูโูุง
**ุฑุงูโุญู:**
1. ุฏุณุชุฑุณโูุง ูุงู (permissions) ุฑุง ุจุฑุฑุณ ฺฉูุฏ
2. ูุทูุฆู ุดูุฏ ูพูุดู `uploads/tabesh-files/` ูุงุจู ููุดุชู ุงุณุช
3. ูุงฺฏโูุง PHP ุฑุง ุจุฑุฑุณ ฺฉูุฏ (`wp-content/debug.log`)

---

## ุขูุงุฑ ุชุบุฑุงุช ฺฉุฏ

```
4 files changed
+1,338 lines added
-8 lines removed
```

**ูุงูโูุง ุชุบุฑ ุงูุชู:**
- `assets/js/admin.js` - JavaScript cleanup functionality
- `includes/handlers/class-tabesh-export-import.php` - PHP cleanup methods
- `tabesh.php` - REST API endpoints
- `templates/admin/admin-settings.php` - UI interface

---

## ูพุดุชุจุงู

ุฏุฑ ุตูุฑุช ุจุฑูุฒ ูุดฺฉู:
1. ูุงฺฏโูุง ุงููุช ุฑุง ุจุฑุฑุณ ฺฉูุฏ (`wp_tabesh_security_logs`)
2. ูุงู `wp-content/debug.log` ุฑุง ฺฺฉ ฺฉูุฏ (ุฏุฑ ุตูุฑุช ูุนุงู ุจูุฏู WP_DEBUG)
3. Issue ุฏุฑ GitHub ุจุงุฒ ฺฉูุฏ

---

## ุชุณุชโูุง ุงูุฌุงู ุดุฏู โ

- [x] PHP Syntax Validation - ูููู
- [x] JavaScript Syntax Validation - ูููู
- [x] Code Review - ููู ูุดฺฉูุงุช ุฑูุน ุดุฏ
- [x] CodeQL Security Scan - ุจุฏูู ุขุณุจโูพุฐุฑ
- [x] Path Traversal Prevention - ุชุณุช ู ุชุฃุฏ ุดุฏ
- [x] Exception Handling - ูพูุดุด ุฏุงุฏู ุดุฏ

---

**ูุณุฎู:** 1.0.3
**ุชุงุฑุฎ ุจูโุฑูุฒุฑุณุงู:** 2025-12-08
**ุณุงุฒฺฏุงุฑ:** WordPress 6.8+, PHP 8.2.2+
