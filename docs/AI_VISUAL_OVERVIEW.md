# Tabesh AI System - Visual Overview

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Tabesh AI System                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Frontend (Customer Side)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  [tabesh_ai_chat] Shortcode                              â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  ðŸ’¬ Chat Interface (ai-chat.php)                   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Robot Avatar                                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Message History                                  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Input Field                                      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Quick Suggestions                                â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                             â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  ðŸŽ¨ Styles (ai-chat.css)                           â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - RTL Support                                      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Responsive Design                                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Animations                                       â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                             â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  âš¡ Logic (ai-chat.js)                             â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - AJAX Communication                               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Form Context Reading                             â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - Message Display                                  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â”‚ REST API
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    REST API Layer (WordPress)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  ðŸ“¡ /wp-json/tabesh/v1/ai/chat                                  â”‚
â”‚     - POST: Send message to AI                                  â”‚
â”‚     - Authentication: WordPress Nonce                           â”‚
â”‚     - Permission: User must have AI access                      â”‚
â”‚                                                                  â”‚
â”‚  ðŸ“Š /wp-json/tabesh/v1/ai/form-data                             â”‚
â”‚     - GET: Retrieve form options                                â”‚
â”‚     - Returns: Available book sizes, paper types, etc.          â”‚
â”‚                                                                  â”‚
â”‚  ðŸ”„ /wp-json/tabesh/v1/ai/forward                               â”‚
â”‚     - POST: Forward request (Client mode)                       â”‚
â”‚     - Sends to external server                                  â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Backend (Controller Layer)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ðŸŽ›ï¸  Tabesh_AI (Main Controller)                        â”‚  â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚
â”‚  â”‚  - Route requests based on mode                           â”‚  â”‚
â”‚  â”‚  - Handle Direct/Server/Client modes                      â”‚  â”‚
â”‚  â”‚  - Manage context building                                â”‚  â”‚
â”‚  â”‚  - Coordinate other components                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                    â”‚                    â”‚
           â”‚                    â”‚                    â”‚
           â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš™ï¸  Config     â”‚  â”‚  ðŸ”’ Permissions â”‚  â”‚  ðŸ¤– Gemini     â”‚
â”‚  Layer          â”‚  â”‚  Layer          â”‚  â”‚  Driver         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚
â”‚ Settings:       â”‚  â”‚ Check:          â”‚  â”‚ Features:       â”‚
â”‚ - Enabled       â”‚  â”‚ - User roles    â”‚  â”‚ - API calls     â”‚
â”‚ - Mode          â”‚  â”‚ - Data access   â”‚  â”‚ - Prompts       â”‚
â”‚ - API Key       â”‚  â”‚ - Filter data   â”‚  â”‚ - Cache         â”‚
â”‚ - Allowed roles â”‚  â”‚ - Audit logs    â”‚  â”‚ - Translate     â”‚
â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚
                                                   â”‚
                                                   â–¼
                                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                         â”‚  ðŸŒ Google      â”‚
                                         â”‚  Gemini API     â”‚
                                         â”‚  2.0 Flash      â”‚
                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Operation Modes

### Mode 1: Direct Mode (Default)
```
Customer                    Tabesh Plugin              Google Gemini
   â”‚                              â”‚                          â”‚
   â”‚  1. Send Message            â”‚                          â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚
   â”‚                              â”‚  2. API Request          â”‚
   â”‚                              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                              â”‚                          â”‚
   â”‚                              â”‚  3. AI Response          â”‚
   â”‚                              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚  4. Display Response         â”‚                          â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                          â”‚
   â”‚                              â”‚                          â”‚

âœ… Fast and direct
âœ… Full control
âš ï¸ Requires API key
```

### Mode 2: Server Mode
```
External Site              Your Tabesh Site           Google Gemini
   â”‚                              â”‚                          â”‚
   â”‚  1. Request (with auth)     â”‚                          â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚
   â”‚                              â”‚  2. API Request          â”‚
   â”‚                              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                              â”‚                          â”‚
   â”‚                              â”‚  3. AI Response          â”‚
   â”‚                              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚  4. Return Response          â”‚                          â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                          â”‚
   â”‚                              â”‚                          â”‚

âœ… Share one API key across multiple sites
âœ… Centralized management
âš ï¸ Requires server setup
```

### Mode 3: Client Mode
```
Your Site                  External Server            Google Gemini
   â”‚                              â”‚                          â”‚
   â”‚  1. Customer Message        â”‚                          â”‚
   â”‚                              â”‚                          â”‚
   â”‚  2. Forward Request          â”‚                          â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚
   â”‚                              â”‚  3. API Request          â”‚
   â”‚                              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                              â”‚                          â”‚
   â”‚                              â”‚  4. AI Response          â”‚
   â”‚                              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚  5. Return Response          â”‚                          â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                          â”‚
   â”‚  6. Display to Customer      â”‚                          â”‚
   â”‚                              â”‚                          â”‚

âœ… No API key needed
âœ… Lower management overhead
âš ï¸ Depends on external server
```

## Data Flow

### Chat Message Flow

```
1. User Types Message
   â”‚
   â–¼
2. JavaScript Captures Input
   - Read form data (book size, pages, etc.)
   - Build context object
   â”‚
   â–¼
3. AJAX Request to REST API
   - POST /wp-json/tabesh/v1/ai/chat
   - Include: message + context + nonce
   â”‚
   â–¼
4. WordPress Authentication
   - Verify nonce
   - Check user login
   - Verify AI permission
   â”‚
   â–¼
5. Tabesh_AI Controller
   - Determine mode (Direct/Server/Client)
   - Check permissions
   - Filter context data
   â”‚
   â–¼
6. Mode-Specific Handler
   â”‚
   â”œâ”€ Direct Mode â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  - Call Gemini API         â”‚
   â”‚  - Build system prompt     â”‚
   â”‚  - Send request            â”‚
   â”‚                            â”‚
   â”œâ”€ Server Mode â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚  (Same as Direct)          â”‚
   â”‚                            â”‚
   â””â”€ Client Mode â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      - Forward to ext. server  â”‚
      - Include auth token      â”‚
                                â”‚
                                â–¼
7. Get Response from AI
   - Parse response
   - Check for errors
   - Extract message
   â”‚
   â–¼
8. Cache Response (if enabled)
   - Store in transients
   - Set TTL
   â”‚
   â–¼
9. Return JSON Response
   - success: true/false
   - message: AI response
   - usage: token counts
   â”‚
   â–¼
10. JavaScript Displays
    - Add message bubble
    - Format timestamp
    - Scroll to bottom
```

## Permission System

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      User Role Hierarchy                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Administrator
    â”‚
    â”œâ”€ âœ… Full Access to All Features
    â”œâ”€ âœ… Can View Orders
    â”œâ”€ âœ… Can View Users
    â”œâ”€ âœ… Can View Pricing
    â””â”€ âœ… Can View WooCommerce Data

Shop Manager
    â”‚
    â”œâ”€ âš™ï¸  Configurable Access
    â”œâ”€ â“ May view Orders (if enabled)
    â”œâ”€ â“ May view Users (if enabled)
    â”œâ”€ â“ May view Pricing (if enabled)
    â””â”€ â“ May view WooCommerce (if enabled)

Customer
    â”‚
    â”œâ”€ âš™ï¸  Limited Access
    â”œâ”€ âœ… Can use AI chat
    â”œâ”€ âœ… Can view own orders only
    â”œâ”€ âŒ Cannot view other users
    â””â”€ âŒ Cannot view WooCommerce data

Guest (Not logged in)
    â”‚
    â””â”€ âŒ No Access to AI

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Data Access Control                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Each permission can be individually enabled/disabled:

ðŸ—ƒï¸  access_orders        â†’ View order information
ðŸ‘¤ access_users          â†’ View user information  
ðŸ’° access_pricing        â†’ View pricing calculations
ðŸ›’ access_woocommerce    â†’ View WooCommerce data

Example Context Filtering:
Before: {orders: [...], users: [...], pricing: [...]}
After:  {orders: [...], pricing: [...]}  (if user access disabled)
```

## Configuration Options

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Admin Settings Panel                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ðŸŽ›ï¸ General Settings
   â”œâ”€ Enable AI System          [âœ“] Enabled
   â”œâ”€ Operation Mode            [Direct â–¼]
   â””â”€ Gemini Model              [2.0 Flash â–¼]

ðŸ”‘ API Configuration
   â”œâ”€ Gemini API Key            [AIza...] ðŸ” Test
   â”œâ”€ Server URL (Client mode)  [https://...]
   â””â”€ Server API Key            [secret...]

ðŸ‘¥ Access Control
   â”œâ”€ Allowed Roles
   â”‚  â”œâ”€ [âœ“] Administrator
   â”‚  â”œâ”€ [âœ“] Shop Manager
   â”‚  â””â”€ [âœ“] Customer
   â”‚
   â””â”€ Data Access
      â”œâ”€ [âœ“] Orders
      â”œâ”€ [ ] Users
      â”œâ”€ [âœ“] Pricing
      â””â”€ [ ] WooCommerce

âš¡ Performance
   â”œâ”€ Cache Enabled             [âœ“] Yes
   â”œâ”€ Cache TTL                 [3600] seconds
   â”œâ”€ Max Tokens                [2048]
   â””â”€ Temperature               [0.7]

ðŸ“‹ Usage
   â””â”€ Shortcode: [tabesh_ai_chat]
```

## User Interface Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Customer Experience                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 1: Visit Page with Shortcode
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Page Content           â”‚
â”‚                         â”‚
â”‚  [Order Form]           â”‚
â”‚                         â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚            â”‚   ðŸ’¬    â”‚  â”‚  â† Floating Button
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 2: Click Chat Button
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ðŸ¤– Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯ ØªØ§Ø¨Ø´     â”‚
â”‚ Ø¢Ù†Ù„Ø§ÛŒÙ†                      â”‚ â”€
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚  ðŸ¤– Ø³Ù„Ø§Ù…! Ú†Ø·ÙˆØ± Ù…ÛŒâ€ŒØªÙˆÙ†Ù…     â”‚
â”‚     Ú©Ù…Ú©ØªÙˆÙ† Ú©Ù†Ù…ØŸ            â”‚
â”‚     10:30                   â”‚
â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ Ù¾ÛŒØ§Ù… Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯...  ðŸ“¤â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Ù‚ÛŒÙ…Øª Ú†Ø§Ù¾] [Ø§Ù†ÙˆØ§Ø¹ ØµØ­Ø§ÙÛŒ]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 3: Send Message
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                             â”‚
â”‚  ðŸ¤– Ø³Ù„Ø§Ù…! Ú†Ø·ÙˆØ± Ù…ÛŒâ€ŒØªÙˆÙ†Ù…     â”‚
â”‚     Ú©Ù…Ú©ØªÙˆÙ† Ú©Ù†Ù…ØŸ            â”‚
â”‚                             â”‚
â”‚           Ù‚ÛŒÙ…Øª Ú†Ø§Ù¾ Ú†Ù‚Ø¯Ø±Ù‡ØŸ  â”‚
â”‚           10:31          ðŸ‘¤ â”‚
â”‚                             â”‚
â”‚  â‹¯ Ø¯Ø± Ø­Ø§Ù„ ØªØ§ÛŒÙ¾...          â”‚  â† Typing
â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 4: Receive Response
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                             â”‚
â”‚  ðŸ¤– Ù‚ÛŒÙ…Øª Ø¨Ø³ØªÚ¯ÛŒ Ø¨Ù‡ Ø¹ÙˆØ§Ù…Ù„   â”‚
â”‚     Ù…Ø®ØªÙ„ÙÛŒ Ø¯Ø§Ø±Ù‡ Ù…Ø«Ù„:       â”‚
â”‚     - Ù‚Ø·Ø¹ Ú©ØªØ§Ø¨             â”‚
â”‚     - Ù†ÙˆØ¹ Ú©Ø§ØºØ°              â”‚
â”‚     - ØªØ¹Ø¯Ø§Ø¯ ØµÙØ­Ø§Øª           â”‚
â”‚     ...                     â”‚
â”‚     10:31                   â”‚
â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## File Structure

```
Tabesh/
â”‚
â”œâ”€â”€ includes/
â”‚   â””â”€â”€ ai/                          â† New AI Module
â”‚       â”œâ”€â”€ class-tabesh-ai.php           (413 lines)
â”‚       â”œâ”€â”€ class-tabesh-ai-config.php    (251 lines)
â”‚       â”œâ”€â”€ class-tabesh-ai-permissions.php (210 lines)
â”‚       â””â”€â”€ class-tabesh-ai-gemini.php    (281 lines)
â”‚
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ admin/
â”‚   â”‚   â””â”€â”€ admin-settings.php       (Modified: +241 lines)
â”‚   â””â”€â”€ frontend/                    â† New Directory
â”‚       â””â”€â”€ ai-chat.php               (91 lines)
â”‚
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ ai-chat.css               (389 lines)
â”‚   â””â”€â”€ js/
â”‚       â””â”€â”€ ai-chat.js                (267 lines)
â”‚
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ AI_SYSTEM_README.md           (447 lines)
â”‚   â””â”€â”€ AI_API_DOCUMENTATION.md       (717 lines)
â”‚
â”œâ”€â”€ AI_IMPLEMENTATION_COMPLETE.md     (500 lines)
â””â”€â”€ tabesh.php                        (Modified: +8 lines)
```

## Next Steps

### For Development Team
1. âœ… Review implementation
2. âœ… Test in development environment
3. â³ Obtain Google AI API key
4. â³ Configure settings
5. â³ Test with real users
6. â³ Deploy to production

### For End Users
1. â³ Read AI_SYSTEM_README.md
2. â³ Get API key from Google
3. â³ Configure in admin panel
4. â³ Add shortcode to page
5. â³ Test chat interface
6. â³ Monitor usage

### For Administrators
1. â³ Review permissions
2. â³ Set allowed roles
3. â³ Configure data access
4. â³ Enable caching
5. â³ Monitor costs
6. â³ Train staff

---

**Status**: âœ… Implementation Complete  
**Version**: 1.0.0  
**Date**: December 24, 2024
